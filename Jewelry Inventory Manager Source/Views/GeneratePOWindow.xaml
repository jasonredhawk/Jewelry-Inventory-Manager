<Window x:Class="Moonglow_DB.Views.GeneratePOWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Generate Purchase Order" Height="900" Width="1200"
        WindowStartupLocation="CenterOwner"
        MinHeight="900" MinWidth="1200"
        Background="#F5F5F5">
    
    <Window.Resources>
        <ResourceDictionary Source="../Styles/SharedStyles.xaml"/>
    </Window.Resources>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#FF9800" CornerRadius="5" Margin="0,0,0,20">
            <TextBlock Text="Generate Purchase Order" 
                       FontSize="18" FontWeight="Bold" 
                       Foreground="White" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center" 
                       Padding="20,10"/>
        </Border>
        
        <!-- Information Panel -->
        <Border Grid.Row="1" Background="#E3F2FD" CornerRadius="5" Margin="0,0,0,20" BorderBrush="#2196F3" BorderThickness="1">
            <StackPanel Margin="15">
                <TextBlock Text="ℹ️ Purchase Order Information" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>
                <TextBlock TextWrapping="Wrap" FontSize="12" LineHeight="16">
                    <Run Text="• "/><Run Text="Products are automatically broken down into their required components for ordering" FontWeight="Bold"/>
                    <LineBreak/>
                    <Run Text="• "/><Run Text="Components are ordered directly as needed" FontWeight="Bold"/>
                    <LineBreak/>
                    <Run Text="• "/><Run Text="Use 'Low &amp; Out of Stock' filter to see all items needing replenishment" FontWeight="Bold"/>
                    <LineBreak/>
                    <Run Text="• "/><Run Text="Filter by location to focus on specific store needs" FontWeight="Bold"/>
                </TextBlock>
            </StackPanel>
        </Border>
        
        <!-- Summary Cards -->
        <Grid Grid.Row="2" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Border Grid.Column="0" Background="#E3F2FD" CornerRadius="5" Margin="5" Padding="10">
                <StackPanel>
                    <TextBlock Text="Low Stock Items" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtLowStockCount" Text="0" FontSize="20" FontWeight="Bold" 
                               HorizontalAlignment="Center" Foreground="#1976D2"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="1" Background="#FFF3E0" CornerRadius="5" Margin="5" Padding="10">
                <StackPanel>
                    <TextBlock Text="Out of Stock" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtOutOfStockCount" Text="0" FontSize="20" FontWeight="Bold" 
                               HorizontalAlignment="Center" Foreground="#F57C00"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="2" Background="#E8F5E8" CornerRadius="5" Margin="5" Padding="10">
                <StackPanel>
                    <TextBlock Text="Total Value" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtTotalValue" Text="$0.00" FontSize="20" FontWeight="Bold" 
                               HorizontalAlignment="Center" Foreground="#388E3C"/>
                </StackPanel>
            </Border>
            
            <Border Grid.Column="3" Background="#FCE4EC" CornerRadius="5" Margin="5" Padding="10">
                <StackPanel>
                    <TextBlock Text="Selected Items" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock x:Name="txtSelectedCount" Text="0" FontSize="20" FontWeight="Bold" 
                               HorizontalAlignment="Center" Foreground="#C2185B"/>
                </StackPanel>
            </Border>
        </Grid>
        
        <!-- Items List -->
        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Filter Controls -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                <TextBlock Text="Filter:" VerticalAlignment="Center" Margin="0,0,8,0" FontWeight="SemiBold"/>
                <ComboBox x:Name="cmbFilter" Width="120" Height="28" Margin="0,0,15,0"
                          SelectionChanged="cmbFilter_SelectionChanged">
                    <ComboBoxItem Content="Low &amp; Out of Stock" IsSelected="True"/>
                    <ComboBoxItem Content="All Items"/>
                    <ComboBoxItem Content="Low Stock Only"/>
                    <ComboBoxItem Content="Out of Stock Only"/>
                    <ComboBoxItem Content="Products Only"/>
                    <ComboBoxItem Content="Components Only"/>
                </ComboBox>
                
                <TextBlock Text="Location:" VerticalAlignment="Center" Margin="0,0,8,0" FontWeight="SemiBold"/>
                <ComboBox x:Name="cmbLocationFilter" Width="120" Height="28" Margin="0,0,15,0"
                          SelectionChanged="cmbLocationFilter_SelectionChanged">
                    <ComboBoxItem Content="All Locations" IsSelected="True"/>
                </ComboBox>
                
                <TextBlock Text="Search:" VerticalAlignment="Center" Margin="0,0,8,0" FontWeight="SemiBold"/>
                <TextBox x:Name="txtSearch" Width="150" Height="28" Margin="0,0,15,0"
                         TextChanged="txtSearch_TextChanged" Style="{StaticResource ModernTextBoxStyle}"/>
                
                <Button x:Name="btnRefresh" Content="Refresh" 
                        Style="{StaticResource ModernButtonStyle}"
                        Width="80" Height="28"
                        Click="btnRefresh_Click"/>
            </StackPanel>
            
            <!-- DataGrid -->
            <DataGrid x:Name="dgItems" Grid.Row="1" 
                      AutoGenerateColumns="False" 
                      CanUserAddRows="False"
                      SelectionMode="Extended"
                      SelectionChanged="dgItems_SelectionChanged"
                      CurrentCellChanged="dgItems_CurrentCellChanged">
                <DataGrid.Columns>
                    <DataGridCheckBoxColumn x:Name="colSelect" Header="Select" Width="60" Binding="{Binding IsSelected}"/>
                    <DataGridTextColumn Header="SKU" Binding="{Binding SKU}" Width="100"/>
                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="200"/>
                    <DataGridTextColumn Header="Location" Binding="{Binding LocationName}" Width="120"/>
                    <DataGridTextColumn Header="Type" Binding="{Binding ItemType}" Width="80"/>
                    <DataGridTextColumn Header="Location Stock" Binding="{Binding CurrentStock}" Width="100"/>
                    <DataGridTextColumn Header="Total Stock" Binding="{Binding TotalStockAcrossLocations}" Width="100"/>
                    <DataGridTextColumn Header="Minimum Stock" Binding="{Binding MinimumStock}" Width="100"/>
                    <DataGridTextColumn Header="Status" Binding="{Binding StockStatus}" Width="100"/>
                    <DataGridTextColumn Header="Price/Cost" Binding="{Binding Price, StringFormat=C}" Width="100"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button x:Name="btnSelectAll" 
                    Content="Select All" 
                    Style="{StaticResource WarningButtonStyle}"
                    Width="100" Height="35" 
                    Margin="0,0,10,0"
                    Click="btnSelectAll_Click"/>
            <Button x:Name="btnClearSelection" 
                    Content="Clear Selection" 
                    Style="{StaticResource ModernButtonStyle}"
                    Width="120" Height="35" 
                    Margin="0,0,10,0"
                    Click="btnClearSelection_Click"/>
            <Button x:Name="btnGeneratePO" 
                    Content="Generate PO" 
                    Style="{StaticResource SuccessButtonStyle}"
                    Width="120" Height="35" 
                    Margin="0,0,10,0"
                    Click="btnGeneratePO_Click"/>
            <Button x:Name="btnCancel" 
                    Content="Cancel" 
                    Style="{StaticResource DangerButtonStyle}"
                    Width="80" Height="35"
                    Click="btnCancel_Click"/>
        </StackPanel>
    </Grid>
</Window> 